
1. Сервер хранит список баз данных в JSON файле или отдельной базе данных.
2. Список баз данных передается на клиента, например, для организации пользовательского интерфейса.
3. Подключение к базе данных может происходить из пользовательского интерфейса или программного кода. В последнем случае одновременно может быть установлено несколько подключений к разным базам данных, в т.ч. и на разных серверах. Стоит учесть это при загрузке и хранении ER модели и прочих атрибутов конекта к базе данных.
4. Проверяется существование объекта типа **DB Connection** для выбранной базы данных. Если нет, то создаем его. Объект обслуживает на стороне сервера все подключения к конкретной базе. После закрытия последнего подключения, он существует ещё заданное время (кэширование), после чего автоматически уничтожается. Время создания объекта **DB Connection** может быть значительным. Следует учесть это при реализации протокола логина пользователя, чтобы он не падал по таймауту.
5. При создании объекта **DB Connection** строим **ER Model** на основании структуры реляционной базы данных и информации из дополнительных таблиц.
6. Внутри объекта **DB Connection** создается объект **Session**, который обслуживает одно внешнее подключение к базе данных.
7. В рамках процедуры логина пользователя **ER Model** сериализуется и передается на клиента.
8. **ER Модель** используется для организации пользовательского интерфейса, анализа текста в NLP и внутри программного кода для доступа к данным.
9. Команда (пакет команд) выборки/изменения данных формируется из модуля NLP, пользовательского интерфейса или программного кода с использованием **ER Модели**. Структура команды должна быть максимально приближенной к структуре SQL запроса.
10. Команда асинхронно передается на сервер для выполнения.
11. На основании **ER Модели** и полученной команды сервер строит SQL запрос (или последовательность SQL запросов).
12. Запрос(ы) выполняются на сервере базы данных в контексте транзакции (или вложенной транзакции, SAVEPOINT). Транзакция может стартовать/комитится/откатываться вручную, по командам с клиентской части, или автоматически. 

![Data flow](img/todo0006.data_flow.svg)

### Пакет команд

### Глобальная транзакция для чтения данных

