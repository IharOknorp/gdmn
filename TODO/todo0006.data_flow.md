
1. Сервер хранит список баз данных в JSON файле или отдельной базе данных.
2. Список баз данных передается на клиента, например, для организации пользовательского интерфейса.
3. Подключение к базе данных может происходить из пользовательского интерфейса или программного кода.
4. Проверяется существование объекта типа **DB Connection** для выбранной базы данных. Если нет, то создаем его. Объект обслуживает все подключения к конкретной базе. После закрытия последнего подключения, он существует заданное время, после чего автоматически уничтожается.
5. При создании объекта **DB Connection** строим **ER Model** на основании структуры реляционной базы данных и информации из дополнительных таблиц.
6. Внутри объекта **DB Connection** создается объект **Session**, который обслуживает одно внешнее подключение к базе данных.
7. В рамках процедуры логина пользователя **ER Model** сериализуется и передается на клиента.
8. Команда (пакет команд) выборки/изменения данных формируется из модуля NLP, пользовательского интерфейса или программного кода с использованием **ER Модели**. Структура команды должна быть максимально приближенной к структуре SQL запроса.
9. Команда асинхронно передается на сервер для выполнения.
10. На основании **ER Модели** и полученной команды сервер строит SQL запрос (или последовательность SQL запросов).
11. Запрос(ы) выполняются на сервере базы данных в контексте транзакции (или вложенной транзакции, SAVEPOINT). Транзакция может стартовать/комитится/откатываться вручную, по командам с клиентской части, или автоматически. 

![Data flow](img/todo0006.data_flow.svg)

### Пакет команд

### Глобальная транзакция для чтения данных

